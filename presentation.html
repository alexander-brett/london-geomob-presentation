<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="style.css"></link>
    <script src="js/remark.js"></script>
    <script src="js/d3.v4.min.js"></script>
    <script src="js/topojson.v1.min.js"></script>
    <script src="js/sql.js"></script>
    <script src="js/libs.js"></script>
    <script src="js/hex/geometry.js"></script>
    <script src="js/hex/grid.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle

# Coding Cartography
## Effectively Communicating Geospatial Data with Javascript
### alexander-brett.co.uk
???

Hi everybody, it's great to be here this evening.
---

# Motivation

???

I put a picture up on my website the other day and Ed thought that...
--

- We care about geospatial data
???
...since we're all here because we care about geospatial data, I'd like to
share some of what I did and why with you.
--

- Maps are easy
???
It turns out that drawing maps with Javascript is really pretty straightforward
with help from appropriately-chosen libraries...
--

- Good visualisations are also easy
???

...and that with a little bit of effort
we can produce cartographic visualisations that are even more effective at
communicating data we care about.
---
# Content

- We're going to draw pictures.
???
We're going to make some pretty pictures using javascript.
Ed sent us all instructions not to show screens full of code...
--
<br/>
- We're going to look at code.
???
... which I'm going to ignore.
---
# Chloropleth

(With thanks to Mike Bostock - https://bl.ocks.org/mbostock/4060606)

???

We'll start out with the most straightforward example. It'll take up about 3 minutes
to go from zero to a the sort of coloured-in map you see day in day out
---
# Chloropleth
## 1 - Get geography

???

Before we can think about putting data in place, we need some basic geography.

--
[http://data.london.gov.uk/dataset/statistical-gis-boundary-files-london](http://data.london.gov.uk/dataset/statistical-gis-boundary-files-london)

???

Fortunately, there are some fantastic resources available for us in this regard.
All of my London data today comes from data.london.gov.uk - it's brilliant, easy-to-navigate,
and there are some really surprisingly detailed and thorough datasets here. I'll show you
a couple later.
--

!["Download GIS data for London"](img/download-gis-data-for-london.PNG "Click 'DOWNLOAD'!")
???

For now though, we find the ward boundaries, then download and unzip them.
---
# Chloropleth
## 2 - Transform into JSON

???

The boundaries are provided as an ESRI shapefile, which is only of limited usefulness
when working with javascript.
--

```
"C:\Program Files\GDAL\ogr2ogr.exe"\
  -f GeoJSON\
  -t_srs EPSG:4326\
  -lco COORDINATE_PRECISION=7\
  wards.json\
  London_Ward_CityMerged.shp
```
--

```
topojson\
  -o wards_simplified.topojson\
  --simplify-proportion 0.5\
  --properties\
  --id-property GSS_CODE\
  -- wards.json
```
---
# Chloropleth
```html
<!DOCTYPE html>
<html>
  <head>
    <script src="d3.v4.min.js"></script>
    <script src="topojson.v1.min.js"></script>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <svg id="Uncoloured-Chloropleth" width="500" height="500"></svg>
    <script>
      var projection = d3.geoMercator()
        .scale(28000)
        .center([-0.09, 51.48])
        .translate([250,250]);

      d3.json("wards_simplified.topojson", function(error, data){
         d3.select("#Uncoloured-Chloropleth").append("g")
          .selectAll("path")
          .data(topojson.feature(data, data.objects.wards).features)
          .enter().append("path")
          .attr("d", d3.geoPath().projection(projection))
          .attr("class", "wards-outline");
      });
    </script>
  </body>
</html>
```
---
name: chloropleth-example-outline
<svg id="Uncoloured-Chloropleth" width="800" height="600"></svg>
---
name: chloropleth-example-coloured
<svg id="Coloured-Chloropleth" width="800" height="600"></svg>
---
name: chloropleth-example-transition
<svg id="Transition-Chloropleth" width="800" height="600"></svg>
???
/tap/
---
class: center
name: hexgrid-cells
<svg id="Hexgrid-cells" width="600" height="600"></svg>
---
class:center
name: hexgrid-algorithm
<svg id="Hexgrid-algorithm" width="600" height="600"></svg>
---
class: center, middle

#The End
###alexander-brett.co.uk
###github.com/alexander-brett
    </textarea>
    <script src="js/slideshowfunctions.js"></script>
  </body>
</html>
